# –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞

## –û–ø–∏—Å–∞–Ω–∏–µ

–°–∫—Ä–∏–ø—Ç `load-test.js` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫ –æ–Ω —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∑–∞–ø—Ä–æ—Å–æ–≤.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (100 –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫—É–Ω–¥—É –≤ —Ç–µ—á–µ–Ω–∏–µ 10 —Å–µ–∫—É–Ω–¥)

```bash
npm run load-test
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
TARGET_URL=http://localhost:3001 npm run load-test

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ production —Å–µ—Ä–≤–µ—Ä–∞
TARGET_URL=https://besttechno.ru npm run load-test

# –ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 100)
RPS=200 npm run load-test

# –ò–∑–º–µ–Ω–∏—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)
DURATION=30 npm run load-test

# –ò–∑–º–µ–Ω–∏—Ç—å endpoint (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é /api/products)
ENDPOINT=/api/categories npm run load-test

# –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
TARGET_URL=http://localhost:3001 RPS=150 DURATION=20 ENDPOINT=/api/products npm run load-test
```

### –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥

#### –¢–µ—Å—Ç –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã API (100 RPS, 10 —Å–µ–∫—É–Ω–¥)
```bash
npm run load-test
```

#### –¢–µ—Å—Ç —Å –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π (200 RPS, 30 —Å–µ–∫—É–Ω–¥)
```bash
RPS=200 DURATION=30 npm run load-test
```

#### –¢–µ—Å—Ç production —Å–µ—Ä–≤–µ—Ä–∞ (100 RPS, 15 —Å–µ–∫—É–Ω–¥)
```bash
TARGET_URL=https://besttechno.ru DURATION=15 npm run load-test
```

#### –¢–µ—Å—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ endpoint
```bash
ENDPOINT=/api/categories npm run load-test
```

## –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ—Å—Ç–∞ —Å–∫—Ä–∏–ø—Ç –≤—ã–≤–æ–¥–∏—Ç:

1. **–û–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:**
   - –í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤
   - –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π RPS (–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É)
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (200-299)
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (403, 429)

2. **–ö–æ–¥—ã —Å—Ç–∞—Ç—É—Å–∞:**
   - –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—Å–µ—Ö HTTP –∫–æ–¥–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤

3. **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞:**
   - –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
   - –ú–µ–¥–∏–∞–Ω–∞
   - –ú–∏–Ω–∏–º—É–º –∏ –º–∞–∫—Å–∏–º—É–º
   - 95-–π –∏ 99-–π –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª–∏

4. **–û—Ü–µ–Ω–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
   - ‚úÖ –û—Ç–ª–∏—á–Ω–æ - –µ—Å–ª–∏ >95% —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è <500ms
   - ‚ö†Ô∏è –ù–æ—Ä–º–∞–ª—å–Ω–æ - –µ—Å–ª–∏ >80% —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è <1000ms
   - ‚ùå –ü—Ä–æ–±–ª–µ–º—ã - –µ—Å–ª–∏ –º–µ–Ω—å—à–µ 80% —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–ª–∏ –±–æ–ª—å—à–æ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞

## –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ù–ê–ì–†–£–ó–û–ß–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø
======================================================================
üéØ –¶–µ–ª–µ–≤–æ–π URL: http://localhost:3001/api/products
‚öôÔ∏è  –ù–∞—Å—Ç—Ä–æ–π–∫–∏: 100 RPS –≤ —Ç–µ—á–µ–Ω–∏–µ 10 —Å–µ–∫—É–Ω–¥
‚è±Ô∏è  –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∞: 10.05 —Å–µ–∫—É–Ω–¥

üìà –û–ë–©–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê:
   –í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤: 1000
   –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π RPS: 100
   ‚úÖ –£—Å–ø–µ—à–Ω—ã—Ö: 998 (99.8%)
   ‚ùå –û—à–∏–±–æ–∫: 2 (0.2%)
   üö´ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ: 0 (0.0%)

üìä –ö–û–î–´ –°–¢–ê–¢–£–°–ê:
   200: 998 (99.8%)
   500: 2 (0.2%)

‚è±Ô∏è  –í–†–ï–ú–Ø –û–¢–í–ï–¢–ê (–º—Å):
   –°—Ä–µ–¥–Ω–µ–µ: 45 –º—Å
   –ú–µ–¥–∏–∞–Ω–∞: 42 –º—Å
   –ú–∏–Ω–∏–º—É–º: 12 –º—Å
   –ú–∞–∫—Å–∏–º—É–º: 234 –º—Å
   95-–π –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª—å: 89 –º—Å
   99-–π –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª—å: 156 –º—Å

======================================================================
‚úÖ –°–µ—Ä–≤–µ—Ä –æ—Ç–ª–∏—á–Ω–æ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –Ω–∞–≥—Ä—É–∑–∫–æ–π!
======================================================================
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞—â–∏—Ç—ã –æ—Ç DDoS

- **–õ–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤:** 1500 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —á–∞—Å —Å –æ–¥–Ω–æ–≥–æ IP
- **–ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏:** IP –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Å—Ä–æ–∫
- **–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞:** —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É –∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## –í–∞–∂–Ω–æ

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ:** –ù–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã –Ω–∞ production —Å–µ—Ä–≤–µ—Ä–µ –±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è, —ç—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å:
- –í—ã—Å–æ–∫—É—é –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫—É –≤–∞—à–µ–≥–æ IP –∞–¥—Ä–µ—Å–∞
- –ü—Ä–æ–±–ª–µ–º—ã –¥–ª—è –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ staging/—Ç–µ—Å—Ç–æ–≤–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏.

## –†—É—á–Ω–∞—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ IP

–ï—Å–ª–∏ –≤–∞—à IP –±—ã–ª –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–π—Ç–µ –µ–≥–æ:

```sql
DELETE FROM blocked_ips WHERE ip_address = '–í–ê–®_IP';
```

–ò–ª–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É –≤ —Ä–∞–∑–¥–µ–ª–µ "–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ IP".
